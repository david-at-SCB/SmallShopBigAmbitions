@page
@model SmallShopBigAmbitions.Pages.IndexModel
@{
    ViewData["Title"] = "Home page";
}

<h1>Webshop</h1>

<section class="mt-4">
    <h2>Hello World Functional Flow</h2>
    <form method="post" asp-page-handler="SayHello">
        <input type="text" name="name" placeholder="Your name" class="form-control mb-2" />
        <button type="submit" class="btn btn-success">Say Hello</button>
    </form>

    @if (!string.IsNullOrEmpty(Model.HelloResult))
    {
        <div class="alert alert-info mt-3">
            @Model.HelloResult
        </div>
    }
</section>

<form method="post" asp-page-handler="AddItemsAndCheckout">
    <input type="hidden" name="UserId" value="@Guid.NewGuid()" />
    <button type="submit" class="btn btn-primary">Add demo item to cart</button>
</form>

@if (Model.AddItemResult.IsSome)
{
    var res = Model.AddItemResult.Match(
        Some: r => r,
        None: () => default!);
    <div class="alert alert-info mt-3">
        Add Item: @(res.Match(Succ: _ => "Success", Fail: e => $"Failed: {e.Message}"))
    </div>
}

<section class="mt-4">
    <h2>Traceable Example Result</h2>
    <form method="post" asp-page-handler="RunExample">
        <button type="submit" class="btn btn-secondary">Run Example</button>
    </form>
    @if (!string.IsNullOrEmpty(Model.ResultMessage))
    {
        <pre>@Model.ResultMessage</pre>
    }
</section>

<section>
    <h2>
        Go to our products :)
    </h2>
    <a asp-page="/Products" class="btn btn-secondary">Go to Products</a>
</section>


